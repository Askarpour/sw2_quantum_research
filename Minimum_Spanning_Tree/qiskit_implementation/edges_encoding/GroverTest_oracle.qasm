OPENQASM 2.0;
include "qelib1.inc";
qreg start[3];
qreg end[3];
qreg flags[2];
qreg ancillas[5];
barrier start[0],start[1],start[2],end[0],end[1],end[2],flags[0],flags[1],ancillas[0],ancillas[1],ancillas[2],ancillas[3],ancillas[4];
x start[0];
x end[1];
x flags[0];
h flags[1];
ccx start[0],start[1],ancillas[0];
ccx start[2],ancillas[0],ancillas[1];
ccx end[0],ancillas[1],ancillas[2];
ccx end[1],ancillas[2],ancillas[3];
ccx end[2],ancillas[3],ancillas[4];
ccx flags[0],ancillas[4],flags[1];
ccx end[2],ancillas[3],ancillas[4];
ccx end[1],ancillas[2],ancillas[3];
ccx end[0],ancillas[1],ancillas[2];
ccx start[2],ancillas[0],ancillas[1];
ccx start[0],start[1],ancillas[0];
h flags[1];
x flags[0];
x end[1];
x start[0];
barrier start[0],start[1],start[2],end[0],end[1],end[2],flags[0],flags[1],ancillas[0],ancillas[1],ancillas[2],ancillas[3],ancillas[4];
